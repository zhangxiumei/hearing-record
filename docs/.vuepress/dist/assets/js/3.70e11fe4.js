(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{254:function(e,t,n){},274:function(e,t,n){"use strict";n(254)},280:function(e,t,n){"use strict";n.r(t);n(90);var i={name:"hearing-record",props:{list:{type:Array}},data:function(){return{linebg:"",lineHeight:30,currentIndex:-1}},computed:{filterList(){let e=[];const t=/^问\：.*/g,n=/^答\：.*/g;return this.list.forEach(i=>{i.match(t)?e.push({str:i.replace(/^问\：/,""),type:1,key:parseInt(1e3*Math.random()+1)}):i.match(n)?e.push({str:i.replace(/^答\：/,""),type:2,key:parseInt(1e3*Math.random()+1)}):i&&e.push({str:i,type:3,key:parseInt(1e3*Math.random()+1)})}),this.$nextTick(()=>{console.log(this.filterList)}),e}},methods:{handleInputEvent(e,t){},handleBlurEvent(e,t){let n=e.target.innerHTML.trim().replace(/<.*?>/gi,""),i=this.list[t];""==i||""==n?this.list.splice(t,1):i!==n&&this.list.splice(t,1,n)},initCancas(){var e=this.$refs.canvas;if(!e)return!1;{let t=window.innerWidth,n=this.lineHeight;e.width=t,e.height=n;let i=e.getContext("2d");i.moveTo(0,n),i.lineTo(e.width,n),i.lineWidth="0.5",i.strokeStyle="blue",i.stroke(),this.linebg=i.canvas.toDataURL()}},addItem(e,t){if(13==e.keyCode){e.preventDefault(),2==this.filterList[t].type?this.list.splice(t+1,0,"问："):this.list.splice(t+1,0,"答："),this.$refs["contenteditable"+t][0].blur(),this.$nextTick(()=>{this.keepLastIndex(this.$refs["contenteditable"+(t+1)][0])})}},keepLastIndex(e){if(window.getSelection)e.focus(),(t=window.getSelection()).selectAllChildren(e),t.collapseToEnd();else if(document.selection){var t;(t=document.selection.createRange()).moveToElementText(e),t.collapse(!1),t.select()}},pasteHtmlAtCaret(e){var t,n;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var s,l,a=document.createDocumentFragment();s=i.firstChild;)l=a.appendChild(s);n.insertNode(a),l&&((n=n.cloneRange()).setStartAfter(l),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)},showQuesition(e,t){this.currentIndex!==t&&(this.currentIndex=t)},addQuesition(e,t){let n=this.quesitionList[t],i=this.list.length,s=!1;this.list.forEach((e,t)=>{e=="问："+n[0]&&(layer.confirm("已经加过同样的问题，还要加吗?",{icon:3,title:"提示"},e=>{this.list.splice(i,0,"问："+n[0],"答："+n[1]),layer.close(e)}),s=!0)}),s||this.list.splice(i,0,"问："+n[0],"答："+n[1])}},mounted(){this.initCancas()}},s=(n(274),n(14)),l=Object(s.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"contenteditable-wrap",style:{background:"url("+e.linebg+") repeat"}},[t("canvas",{ref:"canvas",staticClass:"canvas"}),e._v(" "),e._l(e.filterList,(function(n,i){return t("div",{key:n.key,ref:"contenteditable"+i,refInFor:!0,staticClass:"contenteditable",class:{quesition:1==n.type,answer:2==n.type},style:{lineHeight:e.lineHeight+"px"},attrs:{contenteditable:"true",index:i},on:{input:function(t){return e.handleInputEvent(t,i)},blur:function(t){return e.handleBlurEvent(t,i)},keydown:function(t){return e.addItem(t,i)}}},[t("span",{directives:[{name:"show",rawName:"v-show",value:1==n.type||2==n.type,expression:"item.type == 1 || item.type == 2"}],staticClass:"left"},[e._v(e._s(1==n.type?"问：":2==n.type?"答：":""))]),e._v(" "),t("div",{staticClass:"con"},[e._v(e._s(n.str))])])}))],2)])}),[],!1,null,null,null);t.default=l.exports}}]);